<!doctype html>
<html lang="sk">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>MedAI Dashboard 2.2+</title>
  <link rel="stylesheet" href="/static/styles.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>
<header>
  <div class="brand">ğŸ©º MedAI Dashboard 2.2+</div>
  <div class="row">
    <input id="apiKey" placeholder="API Key" />
    <span id="online" class="badge">offline</span>
    <button onclick="toggleTheme()">ğŸŒ“</button>
  </div>
</header>

<div class="wrap">
  <!-- SIDEBAR -->
  <div class="card sidebar">
    <div class="row">
      <input id="search" placeholder="HÄ¾adaÅ¥ pacienta..." oninput="filterPatients()">
      <button onclick="loadPatients()">NaÄÃ­taÅ¥ pacientov</button>
    </div>
    <div class="helper">Filtrovanie: vÅ¡etci | poslednÃ© vytvorenÃ©</div>
    <div id="patientList" class="list" style="margin-top:8px"></div>
    <hr>
    <h4>NovÃ½ pacient</h4>
    <div class="row">
      <input id="uid" placeholder="UID (napr. P001)">
      <select id="gender"><option value="M">M</option><option value="F">F</option></select>
      <input id="fname" placeholder="Meno">
      <input id="lname" placeholder="Priezvisko">
      <button onclick="createPatient()">VytvoriÅ¥</button>
    </div>
  </div>

  <!-- MAIN -->
  <div class="card main">
    <div id="patientHeader" class="helper">Vyber pacienta zo zoznamu vÄ¾avo.</div>

    <div class="tabbar">
      <div class="tab active" data-tab="timeline" onclick="showTab('timeline')">ğŸ“† Priebeh</div>
      <div class="tab" data-tab="summary" onclick="showTab('summary')">ğŸ§  AI Summary</div>
      <div class="tab" data-tab="therapy" onclick="showTab('therapy')">ğŸ’Š LieÄba</div>
      <div class="tab" data-tab="stats" onclick="showTab('stats')">ğŸ“Š Å tatistiky</div>
      <button onclick="exportPDF()">ğŸ“„ Export PDF</button>
    </div>

    <div class="subtabs" id="filterBar" style="display:none">
      <div class="sub active" data-kind="ALL" onclick="setKind('ALL')">VÅ¡etko</div>
      <div class="sub" data-kind="LAB" onclick="setKind('LAB')">LAB</div>
      <div class="sub" data-kind="EKG" onclick="setKind('EKG')">EKG</div>
      <div class="sub" data-kind="RTG" onclick="setKind('RTG')">RTG</div>
      <div class="sub" data-kind="VIZITA" onclick="setKind('VIZITA')">Vizity</div>
      <div class="sub" data-kind="DIAG" onclick="setKind('DIAG')">DiagnÃ³zy</div>
      <div class="sub" data-kind="OTHER" onclick="setKind('OTHER')">OstatnÃ©</div>
    </div>

    <div id="timeline" class="tabPane" style="display:block"></div>
    <div id="summary" class="tabPane"></div>
    <div id="therapy" class="tabPane"></div>
    <div id="stats" class="tabPane">
      <h3>Å tatistiky hospitalizÃ¡cie</h3>
      <div id="statsBox"><pre>{}</pre></div>
      <canvas id="labChart"></canvas>
    </div>

    <hr>
    <h4>RÃ½chle Å¡ablÃ³ny</h4>
    <div class="row">
      <button onclick='quick("LAB")'>LAB</button>
      <button onclick='quick("EKG")'>EKG</button>
      <button onclick='quick("RTG")'>RTG</button>
      <button onclick='quick("VIZITA")'>Vizita</button>
      <button onclick='quick("DIAG")'>DiagnÃ³za</button>
      <button onclick='quick("LIEÄŒBA")'>LieÄba</button>
    </div>

    <h4 style="margin-top:10px">Pridaj zÃ¡znam</h4>
    <div class="row"><label><input type="checkbox" id="autoCat" checked> Auto kategÃ³ria</label></div>
    <div class="row">
      <input id="cat" placeholder="KategÃ³ria (ak je Auto vypnutÃ©)">
      <textarea id="content" rows="5" placeholder='Obsah JSON (napr. {"test":"CRP","value":120,"unit":"mg/L"})'></textarea>
      <button onclick="addRecord()">PridaÅ¥</button>
    </div>
    <div class="helper">TIP: â€CRP 120 mg/Lâ€œ â†’ pri zapnutej voÄ¾be â€Auto kategÃ³riaâ€œ sa zvolÃ­ LAB.</div>
  </div>
</div>

<!-- Drawer detail -->
<div id="drawer" class="drawer">
  <div class="row" style="justify-content:space-between">
    <h3>Detail zÃ¡znamu</h3>
    <button onclick="closeDrawer()">âœ–</button>
  </div>
  <div id="drawerBody"><pre>{}</pre></div>
  <div class="row"><button onclick="copyDrawer()">KopÃ­rovaÅ¥ JSON</button></div>
</div>

<script src="/static/app.js"></script>
</body>
</html>
